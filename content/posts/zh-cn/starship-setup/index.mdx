---
date: 2024-08-11

title: Starship é…ç½®â€”â€”åœ¨ç»ˆç«¯ä¸Šæ˜¾ç¤º Git çŠ¶æ€ã€Python è™šæ‹Ÿç¯å¢ƒã€å‘½ä»¤è¿è¡Œæ—¶é—´ç­‰
categories:
    - å·¥å…·
tags:
    - ç»ˆç«¯
    - Shell
    - Zsh
    - Nushell
description: "
    Starship æ˜¯ä¸€æ¬¾è·¨å¹³å°çš„ shell ä¸»é¢˜ç®¡ç†å™¨ï¼Œå…¶æ”¯æŒ Zshã€Nushellã€PowerShell ç­‰ã€‚\
    æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•é…ç½® Starshipï¼Œå¹¶åˆ†äº«äº†ç¬”è€…ä½¿ç”¨çš„ä¸»é¢˜ã€‚
    "
image: img/starship_logo.svg
hidden: false
comments: true
draft: false
sitemap:
    disable: false

links:
    - title: Starship
      description: è½»é‡ã€è¿…é€Ÿã€å®¢åˆ¶åŒ–çš„é«˜é¢œå€¼ç»ˆç«¯ï¼
      url: https://starship.rs/zh-CN/
      image: https://raw.githubusercontent.com/starship/starship/2eb5e7e73451a8113b32fdbeca8e0c684b776e05/media/icon.svg
    - title: åœ¨æ‰€æœ‰ç»ˆç«¯ä¸­ä½¿ç”¨ç›¸åŒç•Œé¢ï¼ŒStarship å¸®åŠ©ä½ è‡ªå®šä¹‰å‘½ä»¤è¡Œ
      url: https://sspai.com/post/72888
      image: https://cdn-static.sspai.com/favicon/sspai.ico
---

import Callout from "components/molecules/Callout";
import { Code } from "astro-expressive-code/components";
import starshipConfig from "./src/starship.toml?raw";

Starship æ˜¯ä¸€æ¬¾è·¨å¹³å°çš„ shell ä¸»é¢˜ç®¡ç†å™¨ï¼Œå…¶æ”¯æŒ Zshã€Nushellã€PowerShell ç­‰ã€‚
ä½¿ç”¨ Starship å¯ä»¥åœ¨ç»ˆç«¯ä¸Šæ˜¾ç¤º Git çŠ¶æ€ã€Python è™šæ‹Ÿç¯å¢ƒã€å‘½ä»¤è¿è¡Œæ—¶é—´ç­‰ã€‚
æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•é…ç½® Starshipã€‚

## å®‰è£…

### Starship

Starship [å®˜ç½‘](https://starship.rs/zh-CN/guide/) ä¸Šåˆ—å‡ºäº†ä¸åŒå®‰è£…æ–¹å¼ã€‚
æœ¬æ–‡ä»…ä»‹ç»å…¶ä¸­ä¸¤ç§ã€‚

#### Windows

ç”¨ Scoop å®‰è£…ï¼š

```sh
scoop install starship
```

#### Linux/macOS

ç”¨ Cargo ç¼–è¯‘å¹¶å®‰è£…ï¼š

```sh
cargo install starship --locked
```

æ­¤å¤–è¿˜éœ€è¦å°† Cargo ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶æ·»åŠ åˆ° `PATH`ï¼Œåœ¨ `~/.bashrc`ï¼ˆBashï¼‰æˆ– `~/.zshenv`ï¼ˆZshï¼‰ä¸­æ·»åŠ ï¼š

```sh
# ~/.zshenv

export PATH = "$HOME/.cargo/bin:$PATH"
```

### Nerd Font

Starship çš„è®¸å¤šä¸»é¢˜éƒ½éœ€è¦ [Nerd Font](https://www.nerdfonts.com/) ä¸­çš„ç¬¦å·ã€‚
æ‰€ä»¥éœ€è¦å®‰è£…å¸¦æœ‰ Nerd Font è¡¥ä¸çš„[å­—ä½“](https://www.nerdfonts.com/font-downloads)ã€‚

> [!WARNING/æ³¨æ„]
> å®‰è£…å­—ä½“åè¿˜éœ€è¦åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨å­—ä½“ã€‚
> å¦‚æœä½¿ç”¨ [Windows ç»ˆç«¯](https://github.com/microsoft/terminal)ï¼Œå­—ä½“å¯äº `è®¾ç½® > é…ç½®æ–‡ä»¶ > å¤–è§‚ > å­—ä½“` ä¸­è®¾ç½®ã€‚

#### Windows

Scoop çš„ [`nerd-fonts`](https://github.com/matthewjberger/scoop-nerd-fonts/tree/master/bucket) æºä¸­åŒ…å«äº†è®¸å¤šå­—ä½“çš„ Nerd Font ç‰ˆæœ¬ã€‚
æ‰€ä»¥é¦–å…ˆæ·»åŠ è¯¥æºï¼š

```sh
scoop bucket add nerd-fonts
```

ä¹‹åé€‰æ‹©ä¸€æ¬¾å¿ƒä»ªçš„å­—ä½“ï¼Œä¾‹å¦‚ JetBrains Monoï¼Œå¹¶å®‰è£…ï¼š

```sh
scoop install jetbrainsmono-nf-mono
```

> [!NOTE/å­—ä½“åç¼€]
>
> - `nf`ï¼šNerd Fonts å­—ä½“
> - `mono`ï¼šç­‰å®½å­—ä½“
>
> å…·ä½“å«ä¹‰å¯å‚è€ƒ Nerd Fonts çš„ [README](https://github.com/ryanoasis/nerd-fonts?tab=readme-ov-file#features)ã€‚

#### Ubuntu (Linux)

ä» Nerd Fonts [å®˜ç½‘](https://www.nerdfonts.com/font-downloads) ä¸Šä¸‹è½½å¿ƒä»ªçš„å­—ä½“ï¼Œç„¶åå°†å…¶ä¸­å­—ä½“æ–‡ä»¶è§£å‹åˆ° `~/.local/share/fonts` å³å¯ [^ubuntu-font-install]ã€‚
å¸¦ `Mono` åç¼€çš„ä¸ºç­‰å®½å­—ä½“ã€‚

## é…ç½®

### Shell é…ç½®

å®‰è£… Starship åè¿˜éœ€è¦é…ç½® shellï¼Œ[å®˜ç½‘](https://starship.rs/zh-CN/guide/) ä¸Šä»‹ç»äº†ä¸åŒ shell çš„è®¾ç½®ï¼Œæœ¬æ–‡ä»…ä»‹ç» Nushell å’Œ Zsh çš„é…ç½®ã€‚

#### Nushell

Nushell çš„æƒ…å†µä¸‹éœ€è¦åœ¨ `$nu.env-path` ç¯å¢ƒæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹æ¥ç”Ÿæˆ Starship åˆå§‹åŒ–è„šæœ¬ï¼š

```nu
# env.nu

mkdir ~/.cache/starship
starship init nu | save -f ~/.cache/starship/init.nu
```

ä¹‹åè¿˜éœ€è¦åœ¨ `$nu.config-path` é…ç½®æ–‡ä»¶ä¸­åŠ è½½è„šæœ¬ï¼š

```nu
# config.nu

use ~/.cache/starship/init.nu
```

`~/.cache/starship/init.nu` å¯ä»¥æ›´æ”¹ä¸ºä»»æ„è·¯å¾„ã€‚

#### Zsh

åœ¨ `~/.zshrc` ä¸­æ·»åŠ ï¼š

```sh
# .zshrc

eval "$(starship init zsh)"
```

### Starship é…ç½®

é»˜è®¤æƒ…å†µä¸‹ï¼ŒStarship çš„ [é…ç½®æ–‡ä»¶](https://starship.rs/zh-CN/config/) ä½äº `~/.config/starship.toml`ã€‚
å¦‚æœä¸æƒ³ä»é›¶å¼€å§‹é…ç½®ï¼ŒStarship ä¹Ÿæä¾›äº†è®¸å¤š [é¢„è®¾ä¸»é¢˜](https://starship.rs/zh-CN/presets/)ã€‚
é€‰å¥½ä¸»é¢˜åè¿è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ä½¿ç”¨ï¼š

```sh
starship preset ä¸»é¢˜-åç§° -o ~/.config/starship.toml
```

> [!CAUTION/æ³¨æ„]
> æ­¤å‘½ä»¤ä¼šè¦†ç›–å½“å‰é…ç½®æ–‡ä»¶ï¼

å› ä¸ºç»„ä»¶å¤ªå¤šä¼šæ‹–æ…¢ Shellï¼Œæ‰€ä»¥ç¬”è€…æ¨èä½¿ç”¨ç®€å•çš„ä¸»é¢˜ï¼Œä¾‹å¦‚ [Bracketed Segments](https://starship.rs/zh-CN/presets/bracketed-segments)ã€‚
![Bracketed Segments ä¸»é¢˜ï¼Œå›¾ç‰‡æ¥è‡ª Starship æ–‡æ¡£](https://starship.rs/presets/img/bracketed-segments.png)

> [!TIP/ç¬”è€…çš„é…ç½®]
> éƒ¨åˆ†ç¬¦å·ä¸º Nerd Font å­—ä½“ä¸­çš„ç¬¦å·ï¼Œæ‰€ä»¥å¯èƒ½åœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºä¸å‡ºæ¥ã€‚
>
> <Code code={starshipConfig} lang="toml" title="starship.toml" />

## è‡ªå®šä¹‰

æ˜¾ç„¶ï¼Œè¯»åˆ°è¿™é‡Œçš„è¯»è€…å¹¶ä¸æ»¡è¶³äºé¢„è®¾ä¸»é¢˜ï¼Œæ‰€ä»¥æœ¬æ®µä¼šæ›´æ·±å…¥åœ°ä»‹ç» Starship çš„é…ç½®ã€‚

### æç¤ºç¬¦æ ¼å¼

Starship çš„æç¤ºç¬¦æ ¼å¼ç”± `starship.toml` ä¸­çš„ `format` å­—æ®µå†³å®šï¼Œé»˜è®¤æ˜¾ç¤ºæ‰€æœ‰ç»„ä»¶ [^starship-format]ã€‚
ä¾‹å¦‚ä»¥ä¸‹é…ç½®å¯¹åº”çš„æç¤ºç¬¦ä¸º `ç”¨æˆ·å ä¸»æœºå è·¯å¾„å`ã€‚

```toml
# starship.toml

format = "$username $hostname $directory"
```

å…¶ä¸­ç»„ä»¶çš„æ ¼å¼ä¸º `$ç»„ä»¶åç§°`ã€‚
æ­¤å¤–ï¼Œç»„ä»¶å¾ˆå¤šæ—¶å¯ä»¥ä½¿ç”¨å¤šè¡Œå­—ç¬¦ä¸² `"""` å’Œ `\` æ¥å¿½ç•¥æ¢è¡Œï¼š

```toml
# starship.toml

format = """
$username \
$hostname \
$directory"""
```

> [!WARNING/æ³¨æ„] > `format` å¿…é¡»åœ¨æ‰€æœ‰ç»„ä»¶ä¹‹å‰å®šä¹‰ï¼Œå¦åˆ™å…¶ä¼šè¢«å½“ä½œç»„ä»¶çš„ `format` å­—æ®µ [^toml-table]ã€‚
>
> ```toml
> # starship.toml
> 
> format = ...
> 
> [ç»„ä»¶1]
> ...
> 
> [ç»„ä»¶2]
> ...
> ```

### ç»„ä»¶æ ¼å¼

Starship çš„ç»„ä»¶é€šå¸¸éµå¾ªä»¥ä¸‹æ ¼å¼ï¼š

```toml
# starship.toml

[ç»„ä»¶åç§°]
disable = false
format = "[ä½ å¥½]($style) $symbol"
symbol = "ğŸŒ"
style = "bold green"
```

å­—æ®µå«ä¹‰ï¼š

- `disable`ï¼šæ˜¯å¦ç¦ç”¨ç»„ä»¶ï¼Œ`false` ä¸ºå¯ç”¨
- `format`ï¼šç»„ä»¶æ ¼å¼ï¼Œç±»ä¼¼å‰é¢çš„ `format` å­—æ®µ
- `symbol`ï¼šç»„ä»¶å¯¹åº”çš„ç¬¦å·ï¼Œå¯åœ¨ `format` ä¸­ä½œä¸º `$symbol` ä½¿ç”¨ã€‚
  å¦‚æœæƒ³æ·»åŠ å›¾æ ‡ï¼Œå¯ä»¥ä½¿ç”¨ Emoji æˆ–è€…åœ¨ [Nerd Font](https://www.nerdfonts.com/cheat-sheet) ç½‘ç«™é‡ŒæŸ¥æ‰¾ç¬¦å·ã€‚
- `style`ï¼šå†…å®¹æ ·å¼ï¼Œå¯åœ¨ `format` ä¸­ä½œä¸º `[å†…å®¹]($style)` ä½¿ç”¨ã€‚
  ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ `[å†…å®¹](bold green)`ï¼Œå…·ä½“å¯å‚è€ƒ [æ–‡æ¡£](https://starship.rs/zh-CN/config/#%E6%96%87%E6%9C%AC%E7%BB%84)ã€‚

éƒ¨åˆ†ç»„ä»¶çš„é…ç½®å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼Œä¾‹å¦‚ `username` ä¸­ `style` è¢« `style_user` å’Œ `style_root` å–ä»£ã€‚

## Starship ç»„ä»¶æ¨è

### å¿…è¦

- [`directory`](https://starship.rs/config/#directory)ï¼šå½“å‰ç›®å½•
- [`character`](https://starship.rs/config/#character)ï¼šå‘½ä»¤æç¤ºç¬¦ï¼Œå¯ä»¥æ ¹æ®å‰ä¸€ä¸ªå‘½ä»¤çš„çŠ¶æ€æ”¹å˜æ ·å¼
- [`git_branch`](https://starship.rs/config/#git-branch)ï¼šGit åˆ†æ”¯
- [`git_state`](https://starship.rs/config/#git-state)ï¼šGit çŠ¶æ€ï¼Œä¾‹å¦‚æœ¬åœ°è½åæäº¤æ•°

### å¯é€‰

- [`username`](https://starship.rs/config/#username)ï¼šç”¨æˆ·å
- [`hostname`](https://starship.rs/config/#hostname)ï¼šä¸»æœºå
- [`cmd_duration`](https://starship.rs/config/#command-duration)ï¼šå‘½ä»¤è¿è¡Œæ—¶é—´ï¼Œå¯ä»¥åœ¨å‘½ä»¤è¿è¡Œå®Œåæ˜¾ç¤ºé€šçŸ¥
- å„ç§ç¼–ç¨‹è¯­è¨€å¯¹åº”çš„ç»„ä»¶ï¼Œå¯æ˜¾ç¤ºç‰ˆæœ¬ã€è™šæ‹Ÿç¯å¢ƒç­‰ã€‚

å…¶ä»–ç»„ä»¶å¯ä»¥ä» Starship çš„ [æ–‡æ¡£](https://starship.rs/zh-CN/config/) ä¸Šæ‰¾åˆ°ã€‚
ç”±äºä¸­æ–‡æ–‡æ¡£ç¿»è¯‘ä¸å…¨ï¼Œç¬”è€…å»ºè®®å‚è€ƒ [è‹±æ–‡ç‰ˆ](https://starship.rs/config/)ã€‚
å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å‚ä¸ Starship æ–‡æ¡£çš„ [ç¿»è¯‘å·¥ä½œ](https://starship.rs/zh-CN/guide/#%F0%9F%A4%9D-%E8%B4%A1%E7%8C%AE)ã€‚

[^ubuntu-font-install]: How do I install fonts? https://askubuntu.com/a/3706

[^starship-format]: é»˜è®¤æç¤ºç¬¦æ ¼å¼ï¼ŒStarshipï¼Œhttps://starship.rs/zh-CN/config/#%E9%BB%98%E8%AE%A4%E6%8F%90%E7%A4%BA%E7%AC%A6%E6%A0%BC%E5%BC%8F

[^toml-table]: TOML v1.0.0ï¼Œhttps://toml.io/en/v1.0.0#table
